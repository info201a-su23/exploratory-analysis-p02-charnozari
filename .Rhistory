library(tidyverse)
library(ggplot2)
world_map = map_data("world") %>%
filter(! long > 180)
library(maps)
world_map = map_data("world") %>%
filter(! long > 180)
countries = world_map %>%
distinct(region) %>%
rowid_to_column()
countries %>%
ggplot(aes(fill = rowid, map_id = region)) +
geom_map(map = world_map) +
expand_limits(x = world_map$long, y = world_map$lat) +
coord_map("moll") +
theme_map()
library(ggthemes)
install.packages(ggthemes)
ggtheme
countries %>%
ggplot(aes(fill = rowid, map_id = region)) +
geom_map(map = world_map) +
expand_limits(x = world_map$long, y = world_map$lat) +
coord_map("moll")
View(countries)
View(world_map)
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
world_map = temp_city$Country %>%
filter(! long > 180)
View(world_map)
View(world_map)
countries = world_map %>%
distinct(region) %>%
rowid_to_column()
View(countries)
View(temp_city)
countries %>%
ggplot(aes(fill = temp_city$AverageTemperature, map_id = region)) +
geom_map(map = world_map) +
expand_limits(x = world_map$long, y = world_map$lat) +
coord_map("moll")
View(countries)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv("GlobalLandTemperaturesByCity.csv")
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
View(temp_city)
View(temp_city)
temp_city <- temp_city %>%
select("date" = dt, region = Country, "temp" = AverageTemperature)
temp_city <- temp_city %>%
select("date" = dt, region = Country, "temp" = AverageTemperature) %>%
drop_na()
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
View(temp_city)
temp_city_reduced <- temp_city %>%
select("date" = dt, region = Country, "temp" = AverageTemperature) %>%
drop_na()
View(temp_city_reduced)
world <- map_data("world")
diff <- setdiff(world$region, temp_city_reduced$region)
print(diff)
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
View(temp_city)
temp_city_map <- ggplot(data = temp_city, mapping = aes(x = Longitude, y = Latitude, group = region)) +
coord_fixed(1.3) +
geom_polyon(aes(fill = AverageTemperature)) +
scale_fill_distiller(palette = "RdBu", direction = -1) +
ggtitle("Average Temperature") +
plain
temp_city_map <- ggplot(data = temp_city, mapping = aes(x = Longitude, y = Latitude, group = region)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = AverageTemperature)) +
scale_fill_distiller(palette = "RdBu", direction = -1) +
ggtitle("Average Temperature") +
plain
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
temp_city_map <- ggplot(data = temp_city, mapping = aes(x = Longitude, y = Latitude, group = region)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = AverageTemperature)) +
scale_fill_distiller(palette = "RdBu", direction = -1) +
ggtitle("Average Temperature") +
plain
temp_city_map
temp_city <- temp_city %>%
rename("Country" = region)
temp_city <- temp_city %>%
rename(region = "Country")
View(temp_city)
temp_city <- temp_city %>%
rename(region = "Country", lat = "Latitude", long = "Longitude")
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
temp_city <- temp_city %>%
rename(region = "Country", lat = "Latitude", long = "Longitude")
View(temp_city_map)
View(temp_city)
temp_city_map <- ggplot(data = temp_city, mapping = aes(x = long, y = lat, group = region)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = AverageTemperature)) +
scale_fill_distiller(palette = "RdBu", direction = -1) +
ggtitle("Average Temperature") +
plain
temp_city_map
temp_city_map
temp_city_map <- ggplot(data = temp_city, mapping = aes(x = long, y = lat)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = AverageTemperature)) +
scale_fill_distiller(palette = "RdBu", direction = -1) +
ggtitle("Average Temperature") +
plain
temp_city_map
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
world <- map_data("world")
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
world <- map_data("world")
View(temp_city)
View(temp_city)
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01")
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
select(region = Country, temp = AverageTemperature)
diff <- setdiff(world$region, temp_city_clean$region)
print(diff)
View(world)
help("left_join")
temp_city_clean <- temp_city_clean %>%
left_join(world, by = region)
temp_city_clean <- temp_city_clean %>%
left_join(world, by = "region")
temp_city_clean <- temp_city_clean %>%
left_join(world, by = "region", relationship = "many-to-many")
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
select(region = Country, temp = AverageTemperature)
temp_city_clean <- temp_city_clean %>%
left_join(world, by = "region", multiple = "all")
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt > "2015-01-01") %>%
select(region = Country, temp = AverageTemperature)
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt > "2014-01-01") %>%
select(region = Country, temp = AverageTemperature)
View(temp_city_clean)
View(temp_city)
max_date <- temp_city %>%
filter(date == max(date))
max_date <- temp_city %>%
filter(date == max(date)) %>%
pull(date)
max_date <- temp_city %>%
filter(dt == max(dt)) %>%
pull(dt)
View(temp_city)
temp_city_clean <- temp_city %>%
filter(dt > "2013-09-01") %>%
select(region = Country, temp = AverageTemperature)
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt == "2013-09-01") %>%
select(region = Country, temp = AverageTemperature)
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt == "2013-08-31") %>%
select(region = Country, temp = AverageTemperature)
max_date <- temp_city %>%
drop_na() %>%
filter(dt == max(dt)) %>%
pull(dt)
print(max_date)
max_date <- temp_city %>%
drop_na() %>%
filter(dt == max(dt)) %>%
pull(dt, AverageTemperature)
max_date <- temp_city %>%
drop_na() %>%
filter(dt == max(dt))
View(max_date)
temp_city_clean <- temp_city %>%
filter(dt == "2013-09-01") %>%
select(region = Country, temp = AverageTemperature)
View(temp_city_clean)
View(max_date)
length(unique(temp_city$Country))
temp_city_clean <- temp_city %>%
distinct(Country, .keep_all = TRUE)
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE)
View(temp_city_clean)
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE) %>%
select(region = Country, temp = AverageTemperature)
View(temp_city_clean)
temp_city_clean <- temp_city_clean %>%
left_join(world, by = "region")
View(temp_city_clean)
View(world)
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE) %>%
select(region = Country, temp = AverageTemperature)
world_sub <- inner_join(world, temp_city_clean, by = "region")
View(world_sub)
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
worldtemp <- ggplot(data = worldSubset, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = temp)) +
scale_fill_distiller(palette ="RdBu", direction = -1) + # or direction=1
ggtitle("Global Temperature") +
plain
worldtemp <- ggplot(data = world_sub, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = temp)) +
scale_fill_distiller(palette ="RdBu", direction = -1) + # or direction=1
ggtitle("Global Temperature") +
plain
worldtemp
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('GlobalLandTemperaturesByCity.csv')
world <- map_data("world")
length(unique(temp_city$Country))
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE) %>%
select(region = Country, temp = AverageTemperature)
world_sub <- inner_join(world, temp_city_clean, by = "region")
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
worldtemp <- ggplot(data = world_sub, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = temp)) +
scale_fill_distiller(palette ="RdBu", direction = -1) + # or direction=1
ggtitle("Global Temperature") +
plain
worldtemp
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
world <- map_data("world")
length(unique(temp_city$Country))
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE) %>%
select(region = Country, temp = AverageTemperature)
world_sub <- inner_join(world, temp_city_clean, by = "region")
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
worldtemp <- ggplot(data = world_sub, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = temp)) +
scale_fill_distiller(palette ="RdBu", direction = -1) + # or direction=1
ggtitle("Global Temperature") +
plain
worldtemp
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
world <- map_data("world")
length(unique(temp_city$Country))
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE) %>%
select(region = Country, temp = AverageTemperature)
world_sub <- inner_join(world, temp_city_clean, by = "region")
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
worldtemp <- ggplot(data = world_sub, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = temp)) +
scale_fill_distiller(palette ="RdBu", direction = -1) + # or direction=1
ggtitle("Global Temperature") +
plain
worldtemp
library(tidyverse)
library(readxl)     # for reading excel files
library(usmap)      # for plotting maps
# read data from excel file
filename <- "2022 County Health Rankings Washington Data - v1.xlsx"
sheet <- 4 #4th sheet of excel file
## read columns A:C, which have county info (FIPS code, state, county)
dat_geography <- read_excel(filename, sheet=4, range="A2:C42")
## read columns DS:DT, which have number MH providers and
##      MH providers per 100k people
dat_mh_providers <- read_excel(filename, sheet=4, range="DS2:DT42") %>%
set_names(c("num_providers","providers_per_100k"))
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('/data/GlobalLandTemperaturesByCity.csv')
temp_city <- read.csv('./data/GlobalLandTemperaturesByCity.csv')
world <- map_data("world")
length(unique(temp_city$Country))
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE) %>%
select(region = Country, temp = AverageTemperature)
world_sub <- inner_join(world, temp_city_clean, by = "region")
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
worldtemp <- ggplot(data = world_sub, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = temp)) +
scale_fill_distiller(palette ="RdBu", direction = -1) + # or direction=1
ggtitle("Global Temperature") +
plain
worldtemp
help("scale_fill_viridis_b")
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
View(temp_city)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv#:~:text=calendar_view_week-,GlobalLandTemperaturesByCity,-.csv')
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
View(temp_city)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
View(temp_city)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
ggplot(map_df_temp, aes(x = long, y = lat, group = group, fill = black_jail_pop)) +
geom_polygon()
# US map of black jail populations in 2015
library(ggplot2)
library(tidyverse)
library(dplyr)
library(maps)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
# Sum jail populations from all counties within each state
map_df <- map_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
state <- map_data("state")
state$region <- state.abb[match(state$region, tolower(state.name))]
map_df <- map_df %>%
rename("region" = "state")
map_df_temp <- left_join(map_df, state)
ggplot(map_df_temp, aes(x = long, y = lat, group = group, fill = black_jail_pop)) +
geom_polygon()
# US map of black jail populations in 2015
library(ggplot2)
library(tidyverse)
library(dplyr)
library(maps)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
View(temp_city)
View(temp_city)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-dataselect=GlobalLandTemperaturesByCity.csv')
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?selectGlobalLandTemperaturesByCity.csv')
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCountry.csvv')
View(temp_city)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCountry.csv')
View(temp_city)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalTemperatures.csv')
View(temp_city)
temp_city <- read.csv("https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalTemperatures.csv")
View(temp_city)
temp_city <- read.csv('../../data/GlobalLandTemperaturesByCity.csv')
View(temp_city)
world <- map_data("world")
length(unique(temp_city$Country))
temp_city_clean <- temp_city %>%
filter(dt > "2000-01-01") %>%
distinct(Country, .keep_all = TRUE) %>%
select(region = Country, temp = AverageTemperature)
world_sub <- inner_join(world, temp_city_clean, by = "region")
plain <- theme(
axis.text = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white"),
plot.title = element_text(hjust = 0.5)
)
worldtemp <- ggplot(data = world_sub, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(aes(fill = temp)) +
scale_fill_distiller(palette ="RdBu", direction = -1) + # or direction=1
ggtitle("Global Temperature") +
plain
worldtemp
